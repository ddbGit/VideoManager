/**
 * @module VideoManager
 * @version 1.4.1 - Build: Friday, May 30th, 2014, 19:45:35 GMT
 * @description Creates html `video` tag with `source` and or `img` tag with methods for each instance
 * Auto Constructor (no need to use `new` keyword), to create instance Appends DOM `video` tag to specified element in the DOM
 * And includes methods for each instance.
 * @copyright 2014, PageFX.com
 * @license MIT https://github.com/ddbGit/VideoManager/blob/master/LICENSE.md
 * @author Dean Dal Bozzo dean@pagefx.com
 */
VideoManager=function(){var a=document,b=function(a,b,c){var d={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength","cellspacing ":"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};b&&b.constructor===String&&(b=d[b]||b,c&&("style"===b?a.style.cssText=c:a.setAttribute?a.setAttribute(b,c):a[b]=c))},c=function(c,d){var e=0,f="",g=a.createElement(c);if(d){if(d.children)for(;d.children[e];)g.appendChild(d.children[e]),e+=1;d.text&&g.appendChild(a.createTextNode(d.text));for(f in d.attributes)b(g,f,d.attributes[f])}return g},d=function(){return{ogg:{mimeType:"video/ogg",canPlayType:'video/ogg; codecs="theora, vorbis"'},webm:{mimeType:"video/webm",canPlayType:'video/webm; codecs="vp8.0, vorbis"'},mp4:{mimeType:"video/mp4",canPlayType:'video/mp4; codecs="avc1.4D401E, mp4a.40.2"'}}},e=function(a,b){return a?a+b:""},f=function(a){return"function"==typeof a?a:function(){}},g=function(a){return!!a.canPlayType},h=function(a,b){b&&(a.autoplay=!0)},i=function(a,b){b&&(a.loop=!0)},j=function(){clearInterval(this.videoPlaying),this.videoPlaying=null},k=function(a,b){a&&(j.call(this),b())},l=function(a){var b=this,c=this.elmVid,d=f(a.during),e=f(a.ended);g(c)&&(this.videoPlaying&&j.call(this),this.videoPlaying=setInterval(function(){d(c),k.call(b,c.ended,e)},250))},m=function(a){var b=this.elmSource,j=this.elmVid,k=a.width,m=a.height,n=a.poster,o=a.onPlayback,p=a.elm,q=a.idNamePrefix,r="",s="",t="",u=d();if(g(j)){j.width=k,j.height=m;for(r in u)u.hasOwnProperty(r)&&""!==j.canPlayType(u[r].canPlayType)&&a.video[r]&&(b[r]=c("source",{attributes:{src:a.video[r].url,type:u[r].mimeType,id:e(q,r)}}),j.appendChild(b[r]));p.appendChild(j),h(j,a.autoPlay),i(j,a.loop),j.load(),o&&l.call(this,o)}else n&&n.url&&(s=n.alt||s,t=n.title||t,this.elmImg=c("img",{attributes:{src:n.url,width:k,height:m,title:t,alt:s,id:e(q,"poster")}}),p.appendChild(this.elmImg)),(fnNotSupported=f(o.notSupported))(this.elmImg)},n=function(a){this.elmVid=c("video"),this.elmImg={},this.elmSource={},this.videoPlaying=null,m.call(this,a)};return n.prototype={change:function(a){var b=this.elmVid,c=this.elmSource,e=this.elmImg,f=this.videoPlaying,h=a.restart||!1,i=a.poster,k=a.autoPlay,m=(a.loop,a.onPlayback),n={},o="",p="",q=d();if(i&&i.url&&(e.src=i.url,i.alt&&(e.alt=i.alt),i.title&&(e.title=i.title)),g(b)){for(o in q)q.hasOwnProperty(o)&&(n=c[o],n&&(p=a.video[o].url,h=h||n.src!==p,n.src=p));h&&(b.load(),f&&j.call(this),m&&l.call(this,m),"undefined"!=typeof k&&(k?b.play():b.pause()))}},stopPlayback:function(){var a=this.elmVid;g(a)&&(a.pause(),j.call(this))},getElm:function(){var a=this.elmVid;return g(a)?a:this.elmImg}},function(a){return new n(a)}}();